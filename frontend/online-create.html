<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdn.socket.io https://cdnjs.cloudflare.com; style-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com; font-src 'self' https://cdnjs.cloudflare.com; connect-src 'self' ws://questionpourunchampion-backend.onrender.com wss://questionpourunchampion-backend.onrender.com https://questionpourunchampion-backend.onrender.com; img-src 'self' data: https://upload.wikimedia.org https://commons.wikimedia.org; https://cdn.socket.io"
    />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Créer une partie</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <section class="ecran actif" id="online-create">
      <div class="contenu">
        <header>
          <h1>Créer une partie</h1>
          <p class="sous-titre">Générez un code et partagez-le</p>
        </header>

        <div class="separateur"></div>

        <div class="parametres-partie">
          <h2>Paramètres</h2>

          <div class="groupe-parametre">
            <label for="online-nombre-questions">Nombre de questions</label>
            <select id="online-nombre-questions" class="select-choix">
              <option value="5">5 questions</option>
              <option value="10" selected>10 questions</option>
              <option value="15">15 questions</option>
              <option value="20">20 questions</option>
              <option value="0">Toutes les questions</option>
            </select>
          </div>

          <div class="groupe-parametre">
            <label for="online-temps">Temps par question</label>
            <select id="online-temps" class="select-choix">
              <option value="15000">15 secondes</option>
              <option value="20000">20 secondes</option>
              <option value="30000" selected>30 secondes</option>
              <option value="45000">45 secondes</option>
              <option value="60000">60 secondes</option>
            </select>
          </div>
        </div>

        <div class="separateur"></div>

        <div id="online-create-result" style="display:none;">
          <h2>Code de la partie</h2>
          <div class="caracteristiques" style="grid-template-columns: 1fr;">
            <div class="caracteristique" style="text-align:center;">
              <h3 id="online-code" style="font-size: 2.2rem; letter-spacing: 0.25em; margin: 0;">------</h3>
              <p style="margin-top: 8px;">Partagez ce code ou scannez le QR code</p>
            </div>
          </div>

          <div class="separateur"></div>

          <div style="display:flex; justify-content:center;">
            <div id="online-qrcode" style="padding: 14px; border-radius: 16px;"></div>
          </div>

          <div class="separateur"></div>

          <div class="actions" style="gap: 12px;">
            <button id="btn-copy-code" class="bouton bouton-secondaire">Copier le code</button>
            <button id="btn-copy-link" class="bouton bouton-secondaire">Copier le lien</button>
            <a class="bouton bouton-principal" id="btn-go-lobby" href="online-join.html" style="text-decoration:none">Ouvrir l'écran rejoindre</a>
          </div>
        </div>

        <div class="actions" style="gap: 12px;">
          <button id="btn-create-game" class="bouton bouton-principal">Créer</button>
          <a class="bouton bouton-secondaire" href="online-home.html" style="text-decoration:none">Retour</a>
        </div>

        <p id="online-create-status" style="margin-top: 14px; opacity: 0.85;"></p>
      </div>
    </section>

    <!-- Config (BACKEND_URL) -->
    <script src="config.js"></script>

    <!-- Socket.IO (servi par le backend Render pour respecter le CSP) -->
    <script src="https://questionpourunchampion-backend.onrender.com/socket.io/socket.io.js"></script>

    <!-- QR Code (lib) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

    <!-- Logique -->
    <script src="online-qrcode.js"></script>
    <script src="online.js"></script>
  </body>
</html>
