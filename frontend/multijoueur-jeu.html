<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="theme-color" content="#000000" />
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdn.socket.io https://cdnjs.cloudflare.com; style-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com https://fonts.googleapis.com; font-src 'self' https://cdnjs.cloudflare.com https://fonts.gstatic.com; connect-src 'self' ws://questionpourunchampion-backend.onrender.com wss://questionpourunchampion-backend.onrender.com https://questionpourunchampion-backend.onrender.com https://cdn.socket.io; img-src 'self' data: https://upload.wikimedia.org https://commons.wikimedia.org;" />
  <title>Partie en cours - Question pour un Champion</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
</head>
<body>
  <!-- ============================================ -->
  <!-- ECRAN DE JEU MULTIJOUEUR -->
  <!-- ============================================ -->
  <section id="jeu-multijoueur" class="ecran actif">
    <div class="contenu contenu-large game-container">

      <!-- Header avec infos -->
      <header class="game-header">
        <div class="header-left">
          <span id="info-question" class="info-badge">Question 1/10</span>
        </div>
        <div class="header-center">
          <div class="timer-display" id="timer-container">
            <span id="timer-value" class="timer-value">30</span>
            <span class="timer-label">sec</span>
          </div>
        </div>
        <div class="header-right">
          <span id="info-joueurs" class="info-badge"><i class="fas fa-users"></i> <span id="player-count">0</span></span>
        </div>
      </header>

      <!-- Scores -->
      <div id="scores-grid" class="scores-bar">
        <!-- Scores des joueurs ici -->
      </div>

      <!-- ============================================ -->
      <!-- VUE HOTE (affiche la question et les options) -->
      <!-- ============================================ -->
      <div id="vue-hote" class="game-view">
        <!-- Zone question -->
        <div class="question-zone">
          <div id="question-text" class="question-display">
            En attente de la premiere question...
          </div>
        </div>

        <!-- Options (affichage uniquement pour l'hote) -->
        <div id="options-display" class="options-grid">
          <!-- Options ici -->
        </div>

        <!-- Zone reponse (quand quelqu'un buzze) -->
        <div id="answer-zone" class="answer-zone hidden">
          <div class="answering-player">
            <i class="fas fa-user-circle"></i>
            <span id="answering-name">Joueur</span>
            <span class="answering-text">repond...</span>
          </div>
          <div class="answer-timer">
            <span id="answer-timer-value">15</span>
            <span>sec</span>
          </div>
        </div>

        <!-- Zone resultat -->
        <div id="result-zone" class="result-zone hidden">
          <div id="result-status" class="result-status correct">
            <i class="fas fa-check-circle"></i>
            <span>Bonne reponse !</span>
          </div>
          <div id="result-answer" class="result-answer">
            Reponse : <strong id="correct-answer">---</strong>
          </div>
          <div id="result-illustration" class="result-illustration hidden">
            <img id="result-image" src="" alt="Illustration" />
            <p id="result-description"></p>
          </div>
          <button id="btn-next" class="bouton bouton-principal">
            <i class="fas fa-arrow-right"></i> Question suivante
          </button>
        </div>
      </div>

      <!-- ============================================ -->
      <!-- VUE JOUEUR (buzzer + options de reponse) -->
      <!-- ============================================ -->
      <div id="vue-joueur" class="game-view hidden">
        <!-- Question (visible en mode classique) -->
        <div id="player-question-zone" class="question-zone player-question hidden">
          <div id="player-question-text" class="question-display small">
            Question...
          </div>
        </div>

        <!-- Zone buzzer -->
        <div id="buzzer-zone" class="buzzer-zone">
          <button id="btn-buzzer" class="mega-buzzer">
            <span class="buzzer-text">BUZZ</span>
            <span class="buzzer-icon"><i class="fas fa-bell"></i></span>
          </button>
          <p id="buzzer-status" class="buzzer-status">
            Appuyez pour buzzer !
          </p>
        </div>

        <!-- Options de reponse (apres avoir buzze) -->
        <div id="player-options" class="player-options hidden">
          <!-- Options ici -->
        </div>

        <!-- Resultat joueur -->
        <div id="player-result" class="player-result hidden">
          <div id="player-result-status" class="result-status">
            <i class="fas fa-check-circle"></i>
            <span>Resultat</span>
          </div>
          <p id="player-result-answer" class="result-answer-small"></p>

          <!-- Illustration (mode classique) -->
          <div id="player-result-illustration" class="result-illustration hidden">
            <img id="player-result-image" src="" alt="Illustration" />
            <p id="player-result-description"></p>
          </div>

          <!-- Scores -->
          <div class="player-scores">
            <h4>Classement</h4>
            <div id="player-scores-list" class="scores-list">
              <!-- Scores ici -->
            </div>
          </div>

          <p id="player-waiting-text" class="waiting-text-small">
            <i class="fas fa-clock"></i> Question suivante dans <span id="countdown">5</span>s...
          </p>
        </div>
      </div>

    </div>
  </section>

  <!-- ============================================ -->
  <!-- ECRAN RESULTATS FINAUX -->
  <!-- ============================================ -->
  <section id="resultats-finaux" class="ecran">
    <div class="contenu">
      <header class="final-header">
        <div class="trophy-animation">
          <i class="fas fa-trophy"></i>
        </div>
        <h1>Partie terminee !</h1>
        <p class="sous-titre">Classement final</p>
      </header>

      <div class="separateur"></div>

      <div id="final-rankings" class="final-rankings">
        <!-- Classement ici -->
      </div>

      <div class="separateur"></div>

      <div class="actions">
        <a href="multijoueur.html" class="bouton bouton-secondaire">
          <i class="fas fa-redo"></i> Nouvelle partie
        </a>
        <a href="index.html" class="bouton bouton-principal">
          <i class="fas fa-home"></i> Accueil
        </a>
      </div>
    </div>
  </section>

  <style>
    /* Game container */
    .game-container {
      padding: var(--space-md) !important;
      max-width: 1000px;
    }

    /* Game header */
    .game-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: var(--space-md);
      padding: var(--space-sm) 0;
    }

    .header-left,
    .header-right {
      flex: 1;
    }

    .header-right {
      text-align: right;
    }

    .header-center {
      flex: 0 0 auto;
    }

    .info-badge {
      display: inline-flex;
      align-items: center;
      gap: var(--space-xs);
      padding: var(--space-xs) var(--space-md);
      background: rgba(0, 0, 0, 0.5);
      border: 1px solid var(--charcoal-light);
      border-radius: var(--radius-pill);
      font-size: 0.85rem;
      color: var(--silver);
    }

    /* Timer */
    .timer-display {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: var(--space-sm) var(--space-xl);
      background: rgba(0, 15, 40, 0.8);
      border: 3px solid var(--gold-bright);
      border-radius: var(--radius-pill);
      box-shadow: 0 0 40px rgba(0, 212, 255, 0.4), 0 0 80px rgba(0, 180, 255, 0.2);
    }

    .timer-value {
      font-family: var(--font-mono);
      font-size: 2.5rem;
      font-weight: 700;
      color: var(--gold-glow);
      line-height: 1;
      text-shadow: 0 0 25px rgba(0, 212, 255, 0.9), 0 0 50px rgba(0, 180, 255, 0.6);
    }

    .timer-label {
      font-size: 0.7rem;
      color: var(--steel);
      text-transform: uppercase;
    }

    .timer-display.warning {
      border-color: var(--ruby);
      box-shadow: 0 0 30px rgba(255, 51, 102, 0.4);
    }

    .timer-display.warning .timer-value {
      color: var(--ruby);
      animation: timerBlink 0.5s ease-in-out infinite;
    }

    @keyframes timerBlink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    /* Scores bar */
    .scores-bar {
      display: flex;
      justify-content: center;
      gap: var(--space-md);
      flex-wrap: wrap;
      margin-bottom: var(--space-lg);
      padding: var(--space-sm);
    }

    .score-chip {
      display: flex;
      align-items: center;
      gap: var(--space-sm);
      padding: var(--space-xs) var(--space-md);
      background: rgba(255, 255, 255, 0.03);
      border: 2px solid var(--charcoal-light);
      border-radius: var(--radius-pill);
      transition: all var(--duration-fast);
    }

    .score-chip.leader {
      border-color: var(--gold-glow);
      background: rgba(0, 180, 255, 0.12);
      box-shadow: 0 0 15px rgba(0, 212, 255, 0.3);
    }

    .score-chip.answering {
      border-color: var(--cyan-glow);
      background: rgba(0, 245, 255, 0.1);
      animation: pulseGlow 1s ease-in-out infinite;
    }

    @keyframes pulseGlow {
      0%, 100% { box-shadow: 0 0 10px rgba(0, 245, 255, 0.3); }
      50% { box-shadow: 0 0 25px rgba(0, 245, 255, 0.5); }
    }

    .score-name {
      font-size: 0.9rem;
      color: var(--white);
      max-width: 80px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .score-points {
      font-family: var(--font-display);
      font-size: 1.1rem;
      font-weight: 700;
      color: var(--gold-bright);
    }

    /* Question zone */
    .question-zone {
      margin-bottom: var(--space-xl);
    }

    .question-display {
      font-family: var(--font-display);
      font-size: clamp(1.2rem, 3vw, 1.6rem);
      line-height: 1.5;
      color: var(--white);
      text-align: center;
      padding: var(--space-xl);
      background: linear-gradient(90deg, rgba(0, 140, 200, 0.1) 0%, rgba(0, 80, 140, 0.03) 100%);
      border-left: 4px solid var(--gold-glow);
      border-radius: 0 var(--radius-xl) var(--radius-xl) 0;
      box-shadow: 0 0 30px rgba(0, 140, 200, 0.15);
    }

    .question-display.small {
      font-size: 1rem;
      padding: var(--space-md);
    }

    /* Options grid */
    .options-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: var(--space-md);
      margin-bottom: var(--space-xl);
    }

    .option-card {
      padding: var(--space-lg);
      background: rgba(0, 80, 140, 0.08);
      border: 2px solid rgba(0, 140, 200, 0.2);
      border-radius: var(--radius-lg);
      text-align: center;
      color: var(--silver);
      font-size: 1rem;
      transition: all var(--duration-fast);
    }

    .option-card:hover {
      background: rgba(0, 140, 200, 0.15);
      border-color: rgba(0, 212, 255, 0.4);
      box-shadow: 0 0 20px rgba(0, 180, 255, 0.2);
    }

    /* Answer zone */
    .answer-zone {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: var(--space-xl);
      background: rgba(0, 245, 255, 0.05);
      border: 2px solid var(--cyan-glow);
      border-radius: var(--radius-xl);
      margin-bottom: var(--space-xl);
      box-shadow: var(--glow-cyan);
    }

    .answering-player {
      display: flex;
      align-items: center;
      gap: var(--space-md);
    }

    .answering-player i {
      font-size: 2rem;
      color: var(--cyan-glow);
    }

    #answering-name {
      font-size: 1.3rem;
      font-weight: 600;
      color: var(--white);
    }

    .answering-text {
      color: var(--steel);
      font-style: italic;
    }

    .answer-timer {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: var(--space-sm) var(--space-lg);
      background: rgba(0, 245, 255, 0.1);
      border-radius: var(--radius-pill);
    }

    #answer-timer-value {
      font-family: var(--font-mono);
      font-size: 1.8rem;
      font-weight: 700;
      color: var(--cyan-glow);
    }

    /* Result zone */
    .result-zone {
      text-align: center;
      padding: var(--space-xl);
      background: rgba(0, 0, 0, 0.4);
      border-radius: var(--radius-2xl);
      border: 2px solid var(--gold-muted);
    }

    .result-status {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: var(--space-md);
      font-size: 1.5rem;
      font-weight: 600;
      margin-bottom: var(--space-lg);
    }

    .result-status.correct {
      color: var(--emerald);
    }

    .result-status.correct i {
      font-size: 2rem;
    }

    .result-status.incorrect {
      color: var(--ruby);
    }

    .result-answer {
      font-size: 1.1rem;
      color: var(--silver);
      margin-bottom: var(--space-lg);
    }

    .result-answer strong {
      color: var(--gold-bright);
    }

    .result-illustration {
      margin: var(--space-lg) 0;
    }

    .result-illustration img {
      max-width: 100%;
      max-height: 200px;
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-lg);
    }

    .result-illustration p {
      margin-top: var(--space-sm);
      font-size: 0.9rem;
      color: var(--steel);
      font-style: italic;
    }

    /* ============================================ */
    /* VUE JOUEUR */
    /* ============================================ */

    .player-question {
      margin-bottom: var(--space-lg);
    }

    /* Mega buzzer */
    .buzzer-zone {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: var(--space-xl) 0;
    }

    .mega-buzzer {
      width: 200px;
      height: 200px;
      border-radius: var(--radius-circle);
      border: 8px solid #00AADD;
      background: radial-gradient(circle at 35% 30%, #00FFFF, #00B8E6 40%, #0088CC 70%, #004466);
      color: var(--white);
      font-family: var(--font-body);
      cursor: pointer;
      transition: all var(--duration-fast) var(--ease-smooth);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: var(--space-sm);
      box-shadow:
        0 12px 50px rgba(0, 212, 255, 0.5),
        0 0 80px rgba(0, 180, 255, 0.3),
        inset 0 -10px 30px rgba(0, 0, 0, 0.4),
        inset 0 5px 15px rgba(255, 255, 255, 0.4);
      position: relative;
      overflow: hidden;
    }

    .mega-buzzer::before {
      content: '';
      position: absolute;
      top: 10%;
      left: 15%;
      width: 30%;
      height: 20%;
      background: radial-gradient(ellipse, rgba(255, 255, 255, 0.5), transparent);
      border-radius: 50%;
    }

    .buzzer-text {
      font-size: 2rem;
      font-weight: 800;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
    }

    .buzzer-icon {
      font-size: 1.5rem;
    }

    .mega-buzzer:hover:not(:disabled) {
      transform: scale(1.05);
      box-shadow:
        0 16px 70px rgba(0, 255, 255, 0.6),
        0 0 100px rgba(0, 212, 255, 0.4),
        inset 0 -10px 30px rgba(0, 0, 0, 0.3),
        inset 0 5px 15px rgba(255, 255, 255, 0.4);
      border-color: #00FFFF;
    }

    .mega-buzzer:active:not(:disabled) {
      transform: scale(0.95);
      box-shadow:
        0 4px 20px rgba(0, 180, 255, 0.4),
        inset 0 5px 20px rgba(0, 0, 0, 0.5);
    }

    .mega-buzzer:disabled {
      opacity: 0.4;
      cursor: not-allowed;
      background: radial-gradient(circle at 35% 30%, #334455, #223344 60%, #112233);
      border-color: #334455;
      box-shadow: 0 4px 20px rgba(0, 20, 40, 0.5);
    }

    .mega-buzzer.buzzed {
      background: radial-gradient(circle at 35% 30%, #FF00AA, #CC0088 40%, #990066 70%, #440033);
      border-color: #FF00AA;
      animation: buzzerPulse 0.3s ease 3;
      box-shadow: 0 0 60px rgba(255, 0, 170, 0.6);
    }

    @keyframes buzzerPulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }

    .buzzer-status {
      margin-top: var(--space-lg);
      font-size: 1rem;
      color: var(--steel);
      text-align: center;
    }

    .buzzer-status.success {
      color: var(--cyan-glow);
      font-weight: 600;
    }

    /* Player options */
    .player-options {
      display: flex;
      flex-direction: column;
      gap: var(--space-md);
      padding: var(--space-md);
    }

    .player-option {
      padding: var(--space-lg);
      background: rgba(0, 80, 140, 0.1);
      border: 2px solid rgba(0, 140, 200, 0.25);
      border-radius: var(--radius-xl);
      color: var(--white);
      font-family: var(--font-body);
      font-size: 1.1rem;
      text-align: center;
      cursor: pointer;
      transition: all var(--duration-fast);
    }

    .player-option:hover {
      background: rgba(0, 180, 255, 0.12);
      border-color: rgba(0, 212, 255, 0.5);
      transform: translateY(-2px);
      box-shadow: 0 0 25px rgba(0, 180, 255, 0.2);
    }

    .player-option:active {
      transform: translateY(0) scale(0.98);
    }

    .player-option.selected {
      background: rgba(67, 97, 238, 0.15);
      border-color: var(--cyan-glow);
    }

    .player-option:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    /* Player result */
    .player-result {
      text-align: center;
      padding: var(--space-xl);
    }

    .result-answer-small {
      font-size: 1rem;
      color: var(--silver);
      margin-bottom: var(--space-lg);
    }

    .player-scores {
      background: rgba(0, 20, 50, 0.5);
      padding: var(--space-lg);
      border-radius: var(--radius-xl);
      margin-bottom: var(--space-lg);
      border: 1px solid rgba(0, 140, 200, 0.2);
    }

    .player-scores h4 {
      color: var(--gold-glow);
      margin-bottom: var(--space-md);
      font-size: 0.9rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      text-shadow: 0 0 10px rgba(0, 212, 255, 0.5);
    }

    .scores-list {
      display: flex;
      flex-direction: column;
      gap: var(--space-xs);
    }

    .score-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: var(--space-xs) var(--space-md);
      background: rgba(255, 255, 255, 0.02);
      border-radius: var(--radius-sm);
    }

    .score-row.first {
      background: rgba(0, 180, 255, 0.15);
      border-left: 3px solid var(--gold-glow);
    }

    .score-row-name {
      color: var(--white);
    }

    .score-row-points {
      font-weight: 600;
      color: var(--gold-glow);
      text-shadow: 0 0 8px rgba(0, 212, 255, 0.5);
    }

    .waiting-text-small {
      font-size: 0.9rem;
      color: var(--steel);
    }

    /* ============================================ */
    /* RESULTATS FINAUX */
    /* ============================================ */

    .final-header {
      text-align: center;
    }

    .trophy-animation {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 100px;
      height: 100px;
      margin-bottom: var(--space-lg);
      font-size: 3rem;
      color: var(--gold-glow);
      animation: trophyBounce 1s ease infinite;
    }

    @keyframes trophyBounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    .final-rankings {
      display: flex;
      flex-direction: column;
      gap: var(--space-md);
      max-width: 500px;
      margin: 0 auto;
    }

    .ranking-card {
      display: flex;
      align-items: center;
      gap: var(--space-lg);
      padding: var(--space-lg);
      background: rgba(0, 40, 80, 0.3);
      border: 2px solid rgba(0, 140, 200, 0.2);
      border-radius: var(--radius-xl);
      transition: all var(--duration-fast);
    }

    .ranking-card.first {
      background: linear-gradient(135deg, rgba(0, 180, 255, 0.15), rgba(255, 215, 0, 0.08));
      border-color: var(--gold-glow);
      box-shadow: 0 0 40px rgba(0, 212, 255, 0.4), 0 0 60px rgba(255, 215, 0, 0.2);
    }

    .ranking-card.second {
      background: rgba(140, 180, 210, 0.08);
      border-color: var(--silver);
    }

    .ranking-card.third {
      background: rgba(205, 127, 50, 0.08);
      border-color: #cd7f32;
    }

    .ranking-position {
      font-size: 2rem;
      width: 50px;
      text-align: center;
    }

    .ranking-info {
      flex: 1;
    }

    .ranking-name {
      font-size: 1.2rem;
      font-weight: 600;
      color: var(--white);
    }

    .ranking-score {
      font-family: var(--font-display);
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--gold-bright);
    }

    /* Responsive */
    @media (max-width: 768px) {
      .game-header {
        flex-wrap: wrap;
        gap: var(--space-sm);
      }

      .header-left,
      .header-right {
        flex: 0 0 auto;
      }

      .header-center {
        order: -1;
        flex: 1 0 100%;
        display: flex;
        justify-content: center;
        margin-bottom: var(--space-sm);
      }

      .timer-value {
        font-size: 2rem;
      }

      .options-grid {
        grid-template-columns: 1fr;
      }

      .mega-buzzer {
        width: 160px;
        height: 160px;
      }

      .buzzer-text {
        font-size: 1.5rem;
      }

      .answer-zone {
        flex-direction: column;
        gap: var(--space-md);
        text-align: center;
      }
    }

    @media (max-width: 480px) {
      .scores-bar {
        gap: var(--space-xs);
      }

      .score-chip {
        padding: var(--space-xs) var(--space-sm);
        font-size: 0.8rem;
      }

      .score-name {
        max-width: 50px;
      }

      .mega-buzzer {
        width: 140px;
        height: 140px;
      }

      .buzzer-text {
        font-size: 1.3rem;
      }

      .question-display {
        padding: var(--space-md);
        font-size: 1rem;
      }

      .ranking-card {
        padding: var(--space-md);
      }

      .ranking-position {
        font-size: 1.5rem;
        width: 40px;
      }
    }

    /* Hidden utility */
    .hidden {
      display: none !important;
    }
  </style>

  <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
  <script src="multijoueur-game.js"></script>
</body>
</html>
