<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdn.socket.io; style-src 'self' 'unsafe-inline'; connect-src 'self' ws://questionpourunchampion-backend.onrender.com wss://questionpourunchampion-backend.onrender.com https://questionpourunchampion-backend.onrender.com https://cdn.socket.io; img-src 'self' data: https://upload.wikimedia.org https://commons.wikimedia.org;"
    />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Mode en ligne v2 - Une Question pour un Champion</title>
    <link rel="stylesheet" href="style.css" />
    <script src="config.js"></script>
    <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
  </head>
  <body>
    <section class="ecran actif" id="online-root">
      <div class="contenu">
        <header>
          <h1>Mode en ligne</h1>
          <p class="sous-titre">Chacun a son buzzer — pas d'hôte</p>
        </header>

        <!-- ÉCRAN 1: accueil (créer / rejoindre) -->
        <div id="screen-home" class="bloc">
          <div class="separateur"></div>

          <div class="groupe-parametre">
            <label for="player-name">Votre nom</label>
            <input id="player-name" class="select-choix" placeholder="Ex: Abdoul" />
          </div>

          <div class="separateur"></div>

          <div class="caracteristiques">
            <div class="caracteristique">
              <h3>Créer une partie</h3>
              <p>Partagez un code de 6 caractères.</p>
            </div>
            <div class="caracteristique">
              <h3>Rejoindre</h3>
              <p>Saisissez le code reçu.</p>
            </div>
          </div>

          <div class="separateur"></div>

          <div class="parametres-partie">
            <h2>Paramètres (création)</h2>

            <div class="groupe-parametre">
              <label for="online-players">Nombre de joueurs</label>
              <select id="online-players" class="select-choix">
                <option value="2" selected>2 joueurs</option>
                <option value="3">3 joueurs</option>
                <option value="4">4 joueurs</option>
              </select>
            </div>

            <div class="groupe-parametre">
              <label for="online-questions">Nombre de questions</label>
              <select id="online-questions" class="select-choix">
                <option value="5">5 questions</option>
                <option value="10" selected>10 questions</option>
                <option value="15">15 questions</option>
                <option value="20">20 questions</option>
              </select>
            </div>

            <div class="groupe-parametre">
              <label for="online-time-question">Temps pour buzzer (secondes)</label>
              <select id="online-time-question" class="select-choix">
                <option value="10">10 s</option>
                <option value="20">20 s</option>
                <option value="30" selected>30 s</option>
                <option value="45">45 s</option>
              </select>
            </div>

            <div class="groupe-parametre">
              <label for="online-time-answer">Temps pour répondre (secondes)</label>
              <select id="online-time-answer" class="select-choix">
                <option value="10">10 s</option>
                <option value="15" selected>15 s</option>
                <option value="20">20 s</option>
              </select>
            </div>
          </div>

          <div class="separateur"></div>

          <div class="actions">
            <button id="btn-create" class="bouton bouton-principal">Créer</button>
            <div style="flex:1"></div>
            <input id="join-code" class="select-choix" placeholder="Code (ex: A1B2C3)" style="max-width:220px" />
            <button id="btn-join" class="bouton bouton-secondaire">Rejoindre</button>
          </div>

          <div class="separateur"></div>
          <div id="home-error" class="notification notification-erreur" style="display:none"></div>
        </div>

        <!-- ÉCRAN 2: salle d'attente -->
        <div id="screen-lobby" class="bloc" style="display:none">
          <div class="separateur"></div>

          <div class="caracteristiques">
            <div class="caracteristique">
              <h3>Code de partie</h3>
              <p id="lobby-code" style="font-size: 22px; font-weight: 700; letter-spacing: 2px">------</p>
            </div>
            <div class="caracteristique">
              <h3>Joueurs</h3>
              <p><span id="lobby-count">0</span>/<span id="lobby-max">0</span></p>
            </div>
          </div>

          <div class="separateur"></div>
          <div class="parametres-partie">
            <h2>Participants</h2>
            <div id="players-list" class="historique-liste"></div>
          </div>

          <div class="separateur"></div>
          <div class="actions">
            <button id="btn-start" class="bouton bouton-principal">Démarrer</button>
            <button id="btn-leave" class="bouton bouton-secondaire">Quitter</button>
          </div>
          <p class="sous-titre" id="lobby-hint">La partie démarre automatiquement quand la salle est complète.</p>
        </div>

        <!-- ÉCRAN 3: jeu -->
        <div id="screen-game" class="bloc" style="display:none">
          <div class="separateur"></div>

          <div class="barre-statut">
            <div><strong>Question:</strong> <span id="game-qnum">-</span>/<span id="game-qtotal">-</span></div>
            <div><strong>Temps:</strong> <span id="temps-multijoueur">--</span>s</div>
          </div>

          <div class="separateur"></div>

          <div class="question-zone">
            <h2 id="game-question">...</h2>
            <img id="game-image" alt="Illustration" style="display:none; max-width:100%; border-radius: 16px; margin-top: 10px" />
            <p id="game-illustration" class="sous-titre" style="display:none"></p>
          </div>

          <div class="separateur"></div>

          <div id="buzzer-zone" style="display:flex; justify-content:center; align-items:center; min-height: 180px">
            <button id="btn-buzzer" class="bouton bouton-principal" style="min-width: 260px; min-height: 90px; font-size: 22px">
              BUZZER
            </button>
          </div>

          <div id="answers-zone" style="display:none">
            <h3>Choisissez une réponse</h3>
            <div id="answers-list" class="options-joueurs options-joueurs-4"></div>
          </div>
        </div>

        <!-- ÉCRAN 4: résultat -->
        <div id="screen-result" class="bloc" style="display:none">
          <div class="separateur"></div>
          <header>
            <h1 id="result-title">Résultat</h1>
            <p class="sous-titre" id="result-sub">...</p>
          </header>

          <div class="separateur"></div>

          <div class="parametres-partie">
            <h2>Scores</h2>
            <div id="scores-table" class="historique-liste"></div>
          </div>

          <div class="separateur"></div>

          <div class="actions">
            <button id="btn-back-lobby" class="bouton bouton-secondaire">Retour salle</button>
          </div>
        </div>
      </div>
    </section>

    <script src="online.js"></script>
  </body>
</html>
